syntax = "proto3";

package carrental;

service CarRentalService {
  // Admin operations
  rpc AddCar (Car) returns (CarResponse);
  rpc UpdateCar (UpdateCarRequest) returns (CarResponse);
  rpc RemoveCar (RemoveCarRequest) returns (stream Car);
  rpc CreateUsers (stream User) returns (CreateUsersResponse);

  // Customer operations
  rpc ListAvailableCars (ListCarsRequest) returns (stream Car);
  rpc SearchCar (SearchCarRequest) returns (CarResponse);
  rpc AddToCart (AddToCartRequest) returns (CartResponse);
  rpc PlaceReservation (PlaceReservationRequest) returns (ReservationResponse);
}

// Car details
message Car {
  string make = 1;
  string model = 2;
  int32 year = 3;
  double daily_price = 4;
  int32 mileage = 5;
  string plate = 6;
  string status = 7; // AVAILABLE or UNAVAILABLE
}

// User profile
message User {
  string username = 1;
  string role = 2; // CUSTOMER or ADMIN
  string email = 3;
}

// Request to update car
message UpdateCarRequest {
  string plate = 1;
  double daily_price = 2;
  string status = 3;
}

// Request to remove car
message RemoveCarRequest {
  string plate = 1;
}

// Request to list cars
message ListCarsRequest {
  string filter = 1; // Optional: make, model, year
}

// Request to search car
message SearchCarRequest {
  string plate = 1;
}

// Request to add to cart
message AddToCartRequest {
  string username = 1;
  string plate = 2;
  string start_date = 3; // Format: YYYY-MM-DD
  string end_date = 4;
}

// Request to place reservation
message PlaceReservationRequest {
  string username = 1;
}

// Response messages
message CarResponse {
  bool success = 1;
  string message = 2;
  Car car = 3;
}

message CartResponse {
  bool success = 1;
  string message = 2;
}

message ReservationResponse {
  bool success = 1;
  string message = 2;
  double total_price = 3;
}

message CreateUsersResponse {
  bool success = 1;
  string message = 2;
}
